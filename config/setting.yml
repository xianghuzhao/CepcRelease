bsm:
  require: {'>=': '0.3', '<': '0.4'}

category:
  priority: [work, cepcsoft, external, standby]
  categories:
    not_used: {}
    system:
      pre_check: true
    external:
      install: true
      auto_env: true
      root: '{software_root}/PLATFORM/external'
    cepcsoft:
      install: true
      auto_env: true
      root: '{software_root}/PLATFORM/cepcsoft/{version}'
    data:
      install: true
      auto_env: true
      root: '{software_root}/data'
    work:
      auto_package: true
      auto_env: true
      root: 'WORK_ROOT'
    standby:
      auto_package: true
      auto_env: false
      root: '{software_root}/PLATFORM/standby'

install:
  steps:
    - download
    - extract
    - patch
    - pre_build
    - configure
    - compile
    - install
    - post_build
    - set_env
    - clean
    - save_release_status
  atomic_start: pre_build
  atomic_end: set_env
  no_skip: set_env

env:
  set_env:
    CEPCSOFT: '{software_root}/PLATFORM/cepcsoft/{version}'
    CEPCSOFT_EXTERNAL: '{software_root}/PLATFORM/external'
    CEPCSOFT_DATA: '{software_root}/data'
    CEPCSOFT_VERSION: '{version}'
    CEPCSOFT_PLATFORM: PLATFORM
  set_path:
    BSM_APP_VERSION_PATH: ['cepcenv/{version}']
  unset_env:
    - MARLIN_DLL
  alias:
    hehe: 'hehe xixi lala'
  unalias:
    - hehe

package_path:
  full_list:
    home: '{package}_root_dir'
    src: '{package}_src_dir'
    bin: '{package}_bin_dir'
    lib: '{package}_lib_dir'
    inc: '{package}_inc_dir'
  path_env:
    bin: PATH
    lib: LD_LIBRARY_PATH
    man: MANPATH
    info: INFOPATH
    pkgconfig: PKG_CONFIG_PATH
    cmake: CMAKE_PREFIX_PATH
    python: PYTHONPATH
    marlin: MARLIN_DLL
#  solo_env:
#    home: '{package}_HOME'
#    src: '{package}_SOURCE'
#    bin: '{package}_BIN'
#    lib: '{package}_LIB'
#    inc: '{package}_INCLUDE'

handler:
  # This can also be set in package config
  auto_build: auto_cmake
